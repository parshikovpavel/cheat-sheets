*NoSQL* – широкое понятие. 


# Преимущества:

* можно подобрать узкий инструмент под конкретную узкую задачу

# Особенности



# Разновидности NoSQL

## Key-value хранилища

Примеры:

* Redis

### Document store

Document store (Document-oriented database, документно-ориентированные БД)

<u>Особенности структуры:</u>

- Документы в коллекции не имеют жесткой схемы поэтому:
  - документы не обязательно должны иметь одинаковый набор полей
  - тип данных для поля может отличаться для разных документов в коллекции.
  - можно постепенно добавлять новые поля в новые документы, не затрагивая старые документы
  - чтобы изменить структуру документов в коллекции, необходимо обновить отдельно каждый документ. 
- в документы и массивы можно вкладывать другие документы (*embedded*). Поэтому:
  - связанные данные могут выбираться за одну операцию
  - упрощается шардирование.

<u>Преимущества перед SQL</u>

- *документы* избегают объектно-реляционного разрыва (*Object-relational impedance mismatch*), структуры ООП (объекты, массивы, переменные) можно хранить "как есть"

  

#### Проектирование

Наиболее важное и ключевое решение, которое влияет на всю дальнейшую архитектуру – каким образом выразить отношения между данными в виде коллекций.

Возможные варианты

##### Normalized data model

Нормализованная модель данных (*normalized data model*). Документы в одной коллекции хранят ссылки (*reference*) на документы в другой коллекции.

  ![normalized data model](https://docs.mongodb.com/manual/_images/data-model-normalized.bakedsvg.svg)

##### Denormalized data model

Денормализованная модель данных (*denormalized data model*) – объединяющая все связанные данные в одном документе верхнего уровня, с использованием вложенных документов (*embedded*). Документы могут вкладываться в другие документы или массивы.

##### Атомарность и транзакции

Операция атомарна на уровне документа верхнего уровня, даже если изменения затрагивают *embedded documents*. Поэтому:

- *denormalized data model* позволяет менять документ вместе со связными данными внутри одной атомарной операции, без использования транзакций.
- *normalized data model* для атомарного изменения связанных данных в разных документах требует использовать транзакции.

 