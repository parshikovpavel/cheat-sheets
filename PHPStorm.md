# Быстрые клавиши

ALT+Enter – быстрый фикс проблемы

​                                                  

Закладки

F11 – быстро установить закладку

Shift+F11 – перейти к закладке

## Автоформатирование кода

По нажатию сочетания [CMD]+[ALT]+L IDE отформатирует код в соответствии с настройками (Preferences -> Project Settings -> Code Style -> PHP). По-умолчанию форматируется файл целиком. Если выбрать область, то форматируется только selection. Если выбрать в дереве папку или весь проект, то можно отоформатировать их целиком. 

Для PHP можно выбрать один из предзаданных стилей (например, PSR1\PSR2):

   

## Шаблоны файлов и частей кода

Целые файлы и некоторые части кода создаются из шаблонов. 

Настройка шаблонов в File | Settings | Editor | File and Code Templates. 

Закладки:

\1.      Files – шаблоны целых файлов. 

   

Типы шаблонов:

o   встроенные шаблоны (выделены жирным цветом). Не удаляются, могут редактироваться. Например, PHP Class, PHP Interface.

o   свои шаблоны.

\2.      Includes – шаблоны кода, которые могут включаться в файлы. Эти шаблоны могут использоваться внутри Files шаблонов (целых файлов)

Типы шаблонов:

o   встроенные шаблоны, могут редактироваться. Это PHPDoc шаблоны для классов, методов, функций…

   

o   свои шаблоны

Для включения Includes шаблонов в Files шаблоны используется директива:

\#parse("PHP File Header.php")

\3.      Code – шаблоны кода, который автоматически генерируется PHPStrom. Здесь только встроенные шаблоны (можно редактировать), свои создавать нельзя. Например, SetterMethod, Getter Method, Constructor.

   

Пример

Шаблон PHP Class (файла с классом):

<?php

\#parse("PHP File Header.php")

 

\#if (${NAMESPACE})

 

namespace ${NAMESPACE};

 

\#end

 

class ${NAME} {

 

}

С помощью директивы #parse внутрь шаблона вставляется содержимое файла PHP File Header.php (описан в Includes шаблонах).

Переменные

В шаблонах можно использовать переменные в виде ${MyVariable}.

Типы переменных:

·      Предопределенные

·      Пользовательские, заданные явно так:

\#set( $MyName = "John Smith" )

·      Пользовательские, с незаданным значением. При создании файла (кода) из шаблона, значение переменной будет запрошено:

   

Создание файла из шаблона

Способы:

·      в главном меню File – New или в контекстном меню New

·      по нажатию Alt+Insert

   

Также свои собственные шаблоны можно использовать в окне создания нового класса (New – Php Class):

   

 

## Live Templates

https://habr.com/ru/post/414813/

## Генерация кода

Запускается генерация кода через Code | Generate (Alt+Insert). Содержимое меню зависит от контекста, на котором вызвана команда.

Генерация конструктора

Запуск через Code – Generate – (Alt+Insert) –Constructor. В окне нужено выбрать, какие свойства из класса будут инициализироваться в конструкторе (для этого создаются параметры конструктора и операции присвоения этих параметров).

   

Генерация getter и setter

Генерация методов для интерфейсов и абстрактных классов

Запуск через Code – Generate – (Alt+Insert) –Implement Methods. Для классов, которые реализуют интерфейс (implements) или наследуют от абстрактного класса (extends), создает пустые заглушки для нужных к реализации методов.

Генерация методов, переопределяющих методы родительского класса

Запуск через Code – Generate – (Alt+Insert) – Override methods. Для классов, которые наследуют от родительского класса (extend), создает заглушки методов, переопределяющих методы родительского класса. Заглушка содержит вызов метода родительского класса. 

class ClassB extends ClassA
 {
     public function func()
     {
         parent::*func*(); *//* *TODO**:* *Change* *the* *autogenerated* *stub*     }
 }

## Рефакторинг кода

Извлечение интерфейса (Extract interface)

Запуск Refactor | Extract | Interface. 

Возможности:

·      Заменить ссылку на класс интерфейсом, где это возможно (Replace class reference with interface where possible)

·      Выбор методов для включения в интерфейс

·      Копирование или перемещение PHPDoc из исходного класса в интерфейс

·      Добавляет сгенерированный интерфейс к исходному классу (implements)

# Composer

Доступ к командам возможен:

- *Right-click* на файл `composer.json` → `Composer`
- `Tools | Composer`

Окно для управления зависимостями (пункт меню `Manage Dependencies`):

![Manage dependencies window](https://parshikovpavel.github.io/img/composer/manage_dependencies.png)

# Php Code Sniffer

- Вначале нужно [установить пакет глобально](Psr.md#автоматическая-проверка-стиля-кода).

- В настройках 

  `Settings/Preferences dialog (Ctrl+Alt+S) → Languages & Frameworks | PHP | Quality Tools` 

  указать путь к `phpcs`, найти путь можно в настройках [глобальной директории](Composer.md#глобальная-установка). 

- Конфигурирование *PHP Code Sniffer* в качестве *PhpStorm inspection*:

   `Settings/Preferences dialog (Ctrl+Alt+S) → Editor | Inspections → PHP | Quality tools | PHP Code Sniffer Validation`

  Обязательно указать `Coding Standart`. После этого ошибки будуте автоматически подсвечиваться в коде.  

- Ручная проверка всего проекта `Code → Inspect code`. Ошибки и предупреждения, о которых сообщает *PHP Code Sniffer*, имеют префикс, `phpcs`